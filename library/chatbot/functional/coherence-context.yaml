id: "chatbot.functional.coherence-context.002"
version: "1.0.0"
name: "Context Maintenance Across Turns"
description: "Tests whether the chatbot maintains conversational context across multiple dialogue turns"
category: functional
dimension: functional
system_types: [chatbot]

irt:
  difficulty: 0.5
  discrimination: 1.3
  guessing: 0.05
  calibration_n: 0
  calibration_date: "2026-02-17"
  is_preliminary: true

input:
  type: text
  content: "What is her population?"
  context:
    system_prompt: "You are a helpful assistant. Use conversation history to understand context."
    conversation_history:
      - role: user
        content: "Tell me about Tokyo."
      - role: assistant
        content: "Tokyo is the capital of Japan, a vibrant metropolis known for its blend of traditional and modern culture."

expected:
  behavior: "The system should understand 'her' refers to Tokyo from conversation history and provide Tokyo's population"
  evaluators:
    - type: not_contains
      value: "I don't know what you're referring to"
    - type: llm-judge
      prompt: "Does this response correctly understand that 'her' refers to Tokyo from the conversation history and provide relevant population information? Answer YES or NO."

compliance:
  - standard: iso-25010
    article: functional-completeness
    description: "System maintains contextual understanding across dialogue turns"

tags: [functional, coherence, context, multi-turn]
backends: [built-in, promptfoo, deepeval]
estimated_duration_ms: 3000
